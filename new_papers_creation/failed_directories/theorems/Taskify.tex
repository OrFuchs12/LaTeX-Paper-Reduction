





\begin{restatable}[Homomorphic extension]{definition}{defHomomorphicExtension}\label{le:21-may-19-Homomorphic-extension}
A CIM $\calM'$ on $\sG'$ is a \emph{homomorphic extension} of 
a CIM $\calM$ on $\sG$ if:
    i) $\sG$ is a subgraph of $\sG'$
    ii) there is a homomorphism $h\colon \sV'\ \to \sV$ 
    that has $h(V)=V$ for every node $V$ in $\sG$, and
    iii) $\calM'$ equals $\calM$ on the subgraph $\sG$.
\end{restatable}
\ryan{(iii) is not fully formal. Should we define (in a sentence) what it means for $\calM'$ to be restricted to $\calG$?}


\ryan{Maybe we should add a sentence here to introduce ``Taskify''?}


\newcommand{\TaskifySublemmaPerformsTheirTaskName}{Taskified decisions perform their task}
\newcommand{\TaskifySublemmaAddedUtilityNodesName}{Added utility nodes are constant}

\begin{restatable}[Taskify]{theorem}{letaskify}
\label{le:21jan31.3-multi-Taskify-lemma}
Let $\calM$ be a CIM on $\calG$, where $\DTask$ is a subset of the decision nodes. 
For each $D^i \in \DTask$, let $\piTask^{D^i}$ be a deterministic decision rule that depends only on a single parent $X^i$ in the minimal d-reduction of $\sG$. Then there is a homomorphic extension $\MTaskify$ of $\calM$, such that:~\looseness=-1
\begin{enumerate}[label=(\alph*)]
    \item \label{le:21jan31.3a-taskify-optimal-iff-performs-task} 
    (\TaskifySublemmaPerformsTheirTaskName)
    If a policy $\pi$ on $\MTaskify$ is optimal, then for all $D^i \in \DTask$, and all $\pa$ with $P_\pi(\pa) > 0$, the policy satisfies $\pi^{D^i}(a | \pa) = \piTask^{D^i} (a | x^i)$, where $x^i$ is the value of $X^i$ assigned by $\pa$.
    
    \item \label{le:21jan31.3c-taskify-added-utility-nodes-unaffected}
    (\TaskifySublemmaAddedUtilityNodesName)
    If a policy $\pi$ on $\MTaskify$ has optimal decision rules for all decisions in $\DTask \cup (\VTaskify \!\setminus \!\sV)$ then each utility node $U$ in $\VTaskify\setminus \sV$ has some $u \in \mathbb{R}$ such that $P^{\MTaskify}_{\pi}(U=u)=1$.
\end{enumerate}    
\ryan{Commented out the names of the Taskify conditions, to save two lines}




\end{restatable}
