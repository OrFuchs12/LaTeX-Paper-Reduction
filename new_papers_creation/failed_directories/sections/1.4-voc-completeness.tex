\section{The Taskify Theorem \& Value of Control} \label{sec:voc-completeness-main} %
Value of control describes how much utility an agent could gain
by controlling one extra variable \citep{Matheson1990}.~\looseness=-1

\input{definitions/voc}

Our second main result is a sound and complete criterion for VoC.

\input{theorems/voc}

To prove the soundness direction (\cref{app:soundness}), 
we note that whatever CPD $g^X$ is 
selected, there always exists a policy $\pi$, optimal in $\calM_{g^X}$, that
factors over the minimal d-reduction. Under that $\pi$, changing the CPD of 
$X$ cannot change performance, so in particular, replacing $g^X$ with the non-intervened CPD $p^X$ cannot change performance. Thus any performance that 
can be obtained with an intervention $g^X$ can also be attained without.



To prove the completeness direction, it will suffice to prove that the path $p$ 
carries an effect from $X$ to some $U \in \sU$, so that $U$ 
takes a higher value if an intervention $g^X$ is performed.
In the single-decision case, all nodes on $p$ are chance nodes, so we can simply choose CPDs that copy the value along $p$. 
In the multi-decision case, 
however, 
there may be some decisions on $p$, whose CPDs are chosen by the agent. Thus the problem is to require these decisions to copy their predecessor.
\ryan{Maybe change Taskify out of mathmode?}
To do this, we propose a general procedure called \emph{Taskify}
that generalizes the construction used for completeness of VoI, 
to force \emph{any} decision in the CID to perform an arbitrary task. 
Specifically, for any CID with SR, and any deterministic decision rule $\pi^{D'}$ for $D'$, Taskify constructs a model that requires $D'$ to follow $\pi^{D'}$,
in order to perform optimally. In this way, we can construct a model by ``assigning tasks" to decisions.~\looseness=-1

Formally, Taskify takes a model, and a set of tasks, and generates an extended model on an extended graph (using \cref{le:21may19.2-CID-hom-from-node-copying-and-deleting}). We call such an extension a \textit{homomorphic extension}:~\looseness=-1



\input{theorems/Taskify}


Intuitively, \cref{le:21jan31.3-multi-Taskify-lemma} says that CID graphs are compatible with a wide range of optimal responses to requisite observations.
Condition (b) implies that the added utility nodes are unaffected by interventions inside the support of the intervened variable, which is important for using Taskify to establish properties like VoC.

Using Taskify, we can prove the completeness of graphical criteria in the following steps: (1) Construct a model on the chance nodes and utility nodes; (2) Assign tasks to the decision nodes using Taskify to obtain an extended model,
and show that the property (e.g. VoC) is satisfied;
(3) prove that the property (e.g. VoC) is preserved along the CID homomorphism, so also present in the original graph.
We do this for VoC, and we suggest Taskify may be analogously used for other properties: 








\begin{proof}[Proof of \cref{thm:voc} (Completeness direction)]
\newcommand{\Minitial}{\calM^\mathrm{init}}
Let $\Minitial$ be a model on $\sG$ where 
$P(X=1)=\varepsilon$, $P(X=0)=1-\varepsilon$, $\dom(X)=\{0,1\}$, each other 
chance node 
on $X \pathto U$
copies 
the value of its predecessor, 
and all other nodes have trivial domains.
Then obtain $(\GTaskify, \MTaskify)$ with $h\colon \GTaskify\to \sG$ by 
assigning $\piTask^{D^i}=\delta(d,x)$ the identity function for each $D^i$ on the path (\cref{le:21jan31.3-multi-Taskify-lemma}).
We show there is positive VoC on $X$ in $\MTaskify$: Take any optimal $\pi$ on $\MTaskify$. Since $X$ has full support in $\Minitial$, $X$ also has
full support in the homomorphic extension $\MTaskify$. So,
by \cref{le:21jan31.3-multi-Taskify-lemma} \ref{le:21jan31.3a-taskify-optimal-iff-performs-task}, 
each decision has $\pi^{D^i}(d|\pa)=\piTask^{D^i}(d|\pa)=\delta(d,x)$ with probability 1
under any intervention $g^X$ \chris{Change to be about equals pitask with prob 1.}, 
so that $U=X$, hence $\EE_{\pi}^{\MTaskify}(U | do(X=1)) = 1$, while $\EE_{\pi}^{\MTaskify}(U) = \varepsilon$. 
By \cref{le:21jan31.3-multi-Taskify-lemma} \ref{le:21jan31.3c-taskify-added-utility-nodes-unaffected}, the added utility nodes have constant value (also using full support of $X$). Hence, the VoC on $X$ equals $1-\varepsilon>0$ in $\MTaskify$. Finally, since the CID homomorphism $h$ preserves VoC (\cref{th:CID-homomorphism-preserves-VoC}), the VoC on $h(X)$ in the model $h(\MTaskify)$ on $\sG$ is also positive.~\looseness=-1 
\end{proof}