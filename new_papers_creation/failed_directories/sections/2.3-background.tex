






\section{Background for the proofs} \label{sec:background}
We review two properties of IDs --- and all Bayesian networks --- that we will use throughout our proofs.
\begin{lemma}[Active paths between ancestors contain only ancestors]
\label{le:2.12-active-paths-between-ancestors-contain-only-ancestors}
A path from an ancestor of node $N$ to another ancestor of $N$, that is active conditional on only ancestors of $N$, contains only ancestors of $N$.~\looseness=-1
\end{lemma}
\begin{proof}
Let $p\colon  A \upathto B$ be any active path where $A$ and $B$ are ancestors of $N$ and let the colliders on $p$ be $\sO$.
Since $p$ is active, any collider $O \in \sO$ on $p$ is an ancestor of the conditioned set, and is therefore an ancestor of $N$.
For any chain or fork node $V$, choose one of its outgoing edges along $p$ and follow $p$ until the next collider or endpoint ($\sO$, $A$, or $B$).
This path is directed, so $V$ is an ancestor of $O$, $A$, or $B$, and hence $M$.
\end{proof}






The standard definition of a walk is a sequence of consecutive edges. 
Unless a node has an edge to itself, a walk is not alowed to visit the same node twice in a row.
Instead, we define a notion of a walk such that it is always allowed to repeat the same node previously visited.



\begin{restatable} [Walk with node repetition]{definition}{defwalkwithnoderepetition} \label{def:21feb17.1-walk-with-node-repetition}
A \emph{walk with node repetition} from $N^1$ to $N^n$ in a graph $(\sV, \sE)$ is a sequence of nodes $N^1,...,N^n$ such that for any $i\in \{1,...,n-1\}$, either there is a link $N^i\to N^{i+1}$ or $N^i\gets N^{i+1}$ in $\sE$, or $N^i=N^{i+1}$.
\end{restatable}

We say that a node $N$ in a walk with node repetitions $p$ is a collider/fork/chain node in a walk with node repetitions $w$ if it is a collider/fork/chain node in the walk (without node repetitions) $w'$ obtained by removing any nodes that are equal to their predecessor.

\begin{lemma} [``Active" walk with node repetitions implies active path] \label{21jan21.2-excising-loops-from-active-walks-to-get-active-paths}
If there is a walk with node repetition
from node $A$ to node $B$, such that all fork and chain nodes are not in a set $\sZ$, and all collider nodes have a descendant in $\sZ$, then there is a path between $A$ and $B$ that is active given $\sZ$.
\end{lemma}
\newcommand{\walk}{w}
\newcommand{\ppath}{p}
\begin{proof}
Assume there is a walk with node repetition $\walk\colon A \upathto B$ such that every collider in $\walk$ has a descendant in $\sZ$ and every non-collider in $w$ is not in $\sZ$. 
Then let $p$ be the path obtained from $\walk$ 
by replacing every segment $N \upathto N$ with the node $N$.
Clearly, $\ppath$ is a path, so we will proceed to show that it is active given $\sZ$,
by showing that it is active at each of its nodes.

Assume that $N$ is a collider in $p$.
Then, $N$ was obtained from 
a segment in $w$, $Y_1 \to N \upathto N \leftarrow Y_2$
where $N \upathto N$ has length zero or greater.
For this segment to be active in $w$,
the first collider in $N \upathto N$ must have a descendant in $\sZ$, 
and thus so does $N$, and it is active in $\ppath$.
Assume instead that $N$ is a non-collider.
Then, $N$ was obtained from 
a segment in $w$, $Y_1 \to N \upathto N \to Y_2$, 
$Y_1 \leftarrow N \upathto N \leftarrow Y_2$, or 
$Y_1 \leftarrow N \upathto N \to Y_2$.
In any case, for this segment to be active in $w$, 
$N \not \in \sZ$, so it is active in $\ppath$, proving the result.
\end{proof}

\input{figures/recall}
For our analysis, we consider soluble ID graphs.
This condition includes graphs with perfect recall \cref{fig:perfect-recall}
but also includes some others, shown in \cref{fig:sufficient-recall}.


