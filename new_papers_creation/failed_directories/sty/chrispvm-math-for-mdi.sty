\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{chrispvm-math-for-mdi}[2020/05/12 Chrispvm math package]


\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{thmtools}%For things like automatic referencing of theorems.
%\RequirePackage{hyperref}%This is for hyperreferences on theorems.


% =========================
%  E D I T I N G    M O D E
% =========================
\newif\ifEditingMode
% \EditingModetrue % comment this if you want to remove things like the theorem numberings on lemma labels.
%\hypersetup{colorlinks=true, urlcolor=blue,linkcolor = blue}

\newcommand{\editingMode}[1]{\ifEditingMode{#1}\else\fi}

% =========================
% E N D   O F    E D I T I N G    M O D E
% =========================













\RequirePackage{mathtools}%Don't remember why I started using this.
\RequirePackage{xspace}
\xspaceremoveexception{\bgroup}% To avoid the space exception for \

\RequirePackage{calc}


%\RequirePackage{enumerate}
\RequirePackage{enumitem}


\newcommand{\old}[1]{\begin{quote} \textbf{Old:} #1 \end{quote}}


















% =================
%  T A S K I F Y
% =================

% Taskify DIFF
\newif\ifTaskifyDiff
\newif\ifTaskifyVersion
% \TaskifyDifftrue % uncomment if you want to enable Taskify changes.
% \ifTaskifyDifffalse %uncomment if you want to disable seeing the Taskify diff.
\TaskifyVersionfalse %when uncommented, then if ifTaskifyDiff is off, it will show the taskify version. Otherwise it'll show the original version.
\newif\ifTaskifyTwoDiff
\newif\ifTaskifyTwoVersion
\TaskifyTwoDifftrue % uncomment if you want to enable Taskify changes.
\TaskifyTwoDifffalse %uncomment if you want to disable seeing the Taskify diff.
\TaskifyTwoVersiontrue %when uncommented, then if ifTaskifyDiff is off, it will show the taskify version. Otherwise it'll show the original version.

\newcommand{\Taskifycolor}{brown}
\definecolor{customTaskifyAddcolor}{rgb}{0,0.6,1}
\definecolor{customTaskifyTwoAddcolor}{rgb}{0,0.7,0.5}
\newcommand{\TaskifyAddcolor}{customTaskifyAddcolor}
\newcommand{\TaskifyRemovecolor}{red}
\newcommand{\TaskifyTwoAddcolor}{customTaskifyTwoAddcolor}
\newcommand{\TaskifyTwoRemovecolor}{red}

% {\color{\Taskifycolor}{$\phantom{l}_\textnormal{add:}$}}
\newcommand{\TaskifyAdd}[1]{\ifTaskifyDiff{{\color{\TaskifyAddcolor}#1}}\else\ifTaskifyVersion#1\else\fi\fi\xspace}

\newcommand{\TaskifyTwoAdd}[2]{\ifTaskifyTwoDiff{{\color{\TaskifyTwoAddcolor}#1} \ifTaskifyDiff{\color{\TaskifyAddcolor}#2}\else\fi}\else\ifTaskifyTwoVersion#1\else\ifTaskifyVersion#2\else\fi\fi\fi\xspace}

% {\color{\Taskifycolor}{$\phantom{l}_\textnormal{remove:}$}}
\newcommand{\TaskifyRemove}[1]{\ifTaskifyDiff{{\color{\TaskifyRemovecolor}#1}}\else\ifTaskifyVersion\else#1\fi\fi}

\newcommand{\TaskifyTwoRemove}[1]{\ifTaskifyTwoDiff{{\color{\TaskifyRemovecolor}#1}}\else\ifTaskifyTwoVersion\else#1\fi\fi}

\newcommand{\TaskifyReplaced}[2]{\ifTaskifyDiff{{\color{\TaskifyAddcolor}#1}
{\color{\Taskifycolor}{$\phantom{l}_\textnormal{replaces:}$}} {\color{\TaskifyRemovecolor}#2}}\else{\ifTaskifyVersion#1\else#2\fi}\fi}

\newcommand{\TaskifyTwoReplaced}[3]{\ifTaskifyTwoDiff{{\color{\TaskifyTwoAddcolor}#1} {\ifTaskifyDiff{\color{\TaskifyAddcolor}#2}\else\fi}
{\color{\Taskifycolor}{$\phantom{l}_\textnormal{replaces:}$}} {\color{\TaskifyTwoRemovecolor}#3}}\else{\ifTaskifyTwoVersion#1\else\ifTaskifyVersion#2\else#3\fi\fi}\fi}
% End of Taskify DIFF



\newcommand*{\mask}[2]{%
    \mathord{\makebox[\widthof{\(#1\)}]{\(#2\)}}%
}
% 




\newcommand{\chrisNote}[1]{{\color{blue}\textbf{Chris Notes: } #1 }}


% =================
%  E N D    O F    T A S K I F Y
% =================










% =================
%  S I M P L I F I C A T I O N
% =================
\newif\ifSimplification
\Simplificationtrue
% \Simplificationfalse %when uncommented, then if it will show the simplified version. Otherwise it'll show the original version.
\definecolor{customSimplificationcolor}{rgb}{0,0.6,1}
\newcommand{\Simplificationcolor}{customSimplificationcolor}
\newcommand{\SimplificationRemovecolor}{red}

% {\color{\Taskifycolor}{$\phantom{l}_\textnormal{add:}$}}
\newcommand{\SimplificationAdd}[1]{\ifSimplification{{\color{\Simplificationcolor}#1}}\else\fi\xspace}

\newcommand{\SimplificationRemove}[1]{\ifSimplification{{\color{\SimplificationRemovecolor}#1}}\else#1\fi}

\newcommand{\SimplificationReplaced}[2]{\ifSimplification{{\color{\Simplificationcolor}#1}
{\color{\Taskifycolor}{$\phantom{l}_\textnormal{replaces:}$}} {\color{\SimplificationRemovecolor}#2}}\else#2\fi}


% =================
%  E N D    O F    S I M P L I F I C A T I O N
% =================








\newcommand{\sketch}{{\color{\errorcolor} \textnormal{Sketch}}\xspace}




\newcommand{\sectionref}[1]{\hyperref[#1]{section \ref{#1}}}
\newcommand{\autosubref}[2]{\autoref{#1}\ref{#2}}






%=====================================================================
% T H E O R E M - L I K E   E N V I R O N M E N T S
%=====================================================================

% %\theoremstyle{theorem}
% \newtheorem*{theorem*}{Theorem}
% \newtheorem*{lemma*}{Lemma}
% \theoremstyle{definition}
% \newtheorem*{definition*}{Definition}
% \newtheorem*{conjecture*}{Conjecture}
% \newtheorem*{notation*}{Notation}
% \newtheorem*{terminology*}{Terminology}
% \newtheorem*{remark*}{Remark}

% \newtheorem{conjecture}[theorem]{Conjecture}

%*********************************************************************
% E N D   O F   T H E O R E M - L I K E   E N V I R O N M E N T S
%*********************************************************************




%=====================================================================
% G E N E R A L   M A T H   M O D E   S Y M B O L S
%=====================================================================
%\DeclareMathOperator*{\argmax}{arg\,max}
%\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\domain}{dom}
\newcommand{\Epsilon}{\mathcal E}
%\newcommand{\dom}{\domain\nolimits}
% \newcommand{\casesif}{\quad &\textnormal{if }}
\newcommand{\casesif}[1]{ &\textnormal{if #1}}
\newcommand{\casesotherwise}{\quad&\textnormal{otherwise }}
\newcommand{\mathor}{\textnormal{ or }}
\newcommand{\mathin}{\textnormal{ in }}
\newcommand{\mathand}{\textnormal{ and }}
\newcommand{\mathfor}{\textnormal{ for }}
\newcommand{\mathif}{\textnormal{ if }}
\newcommand{\maththen}{\textnormal{ then }}
\newcommand{\mathelse}{\textnormal{ else }}
%*********************************************************************
% E N D   O F   G E N E R A L   M A T H   M O D E   S Y M B O L S
%*********************************************************************



%=====================================================================
% G E N E R A L  P R O O F   S Y M B O L S
%=====================================================================

\newcommand{\proofcaseinf}[2]{\textit{Case} (\textit{#1}) : (\textit{#2})}
\newcommand{\proofstepinf}[2]{\textit{Step (#1) : #2}}
\newcommand{\sublemmaproof}[2]{Sublemma (\textit{#1}) : (\textit{#2})}


%\definecolor{customerrorcolor}{rgb}{1,0,0}
\definecolor{customproofkeywordcolor}{rgb}{0.7,0,1}
\newcommand{\proofkeywordcolor}{customproofkeywordcolor}
\newcommand{\errorcolor}{red}

% E R R O R    S Y M B O L S
\newcommand{\sorry}{{\color{\errorcolor} \textbf{sorry}}\xspace}%\@ifnextchar.\@gobble{}}
\newcommand{\wrong}{{\color{\errorcolor} \textbf{wrong}}\xspace}%\@ifnextchar.\@gobble{}}
\newcommand{\typeerror}{{\color{\errorcolor} \textbf{type error}}\xspace}
\newcommand{\properror}{{\color{\errorcolor} \textbf{Prop error}}\xspace}
\newcommand{\refmissing}{{\color{\errorcolor} \textbf{Ref}}\xspace}
\newcommand{\errm}[1]{  {\color{\errorcolor}(#1)}\xspace  }
%---------------------------------------------------------------------

% P R O O F   S Y N T A X    H I G H L I G H T I N G
\newcommand{\have}{{\color{\proofkeywordcolor} \textbf{have}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\from}{{\color{\proofkeywordcolor} \textbf{from}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\termend}{{\color{\proofkeywordcolor} \textbf{end}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\by}{{\color{\proofkeywordcolor} \textbf{by}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\assume}{{\color{\proofkeywordcolor} \textbf{assume}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\lett}{{\color{\proofkeywordcolor} \textbf{let}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\suffices}{{\color{\proofkeywordcolor} \textbf{suffices}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\showw}{{\color{\proofkeywordcolor} \textbf{show}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\shows}{{\color{\proofkeywordcolor} \textbf{shows}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\showing}{{\color{\proofkeywordcolor} \textbf{showing}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\applyy}{{\color{\proofkeywordcolor} \textbf{apply}}\xspace}%\@ifnextchar.\@gobble{}
\newcommand{\applying}{{\color{\proofkeywordcolor} \textbf{applying}}\xspace}%\@ifnextchar.\@gobble{}

\newcommand{\ryan}[1]{\todo[color=blue!30]{Ryan: #1}}
\newcommand{\Ryan}[1]{\Todo[color=blue!30]{Ryan: #1}}
\newcommand{\chris}[1]{\todo[color=green!30]{Chris: #1}}
\newcommand{\Chris}[1]{\Todo[color=green!30]{Chris: #1}}
\newcommand{\tom}[1]{\todo[color=red!30]{Tom: #1}}
\newcommand{\Tom}[1]{\Todo[color=red!30]{Tom: #1}}

%---------------------------------------------------------------------

%*********************************************************************
% E N D   O F   G E N E R A L   P R O O F  S Y M B O L S
%*********************************************************************



\definecolor{mytodocolor}{rgb}{0, 0.50, 0}
\definecolor{mymissingref}{rgb}{1, 0, 0}





% Command to redefine \ref with missing labels error ?? marked in red   
\def\@setref#1#2#3{%
  \ifx#1\relax
   \protect\G@refundefinedtrue
   \nfss@text{\reset@font\bfseries\textcolor{mymissingref}{??}}%
   \@latex@warning{Reference `#3' on page \thepage \space
             undefined}%
  \else
   \expandafter#2#1\null
  \fi}

% Command to redefine \autoref with missing labels error ?? marked in red   
\DeclareRobustCommand*{\autoref}{%
  \leavevmode
  \@ifstar{\HyRef@autoref\@gobbletwo}{\HyRef@autoref\hyper@@link}%
}
\def\HyRef@autoref#1#2{%
  \begingroup
    \Hy@safe@activestrue
    \expandafter\HyRef@autosetref\csname r@#2\endcsname{#2}{#1}%
  \endgroup
}
\def\HyRef@autosetref#1#2#3{% link command, csname, refname
  \HyRef@ShowKeysRef{#2}%
  \ifcase 0\ifx#1\relax 1\fi\ifx#1\Hy@varioref@undefined 1\fi\relax
    \edef\HyRef@thisref{%
      \expandafter\@fourthoffive#1\@empty\@empty\@empty
    }%
    \expandafter\HyRef@testreftype\HyRef@thisref.\\%
    \Hy@safe@activesfalse
    #3{%
      \expandafter\@fifthoffive#1\@empty\@empty\@empty
    }{%
      \expandafter\@fourthoffive#1\@empty\@empty\@empty
    }{%
      \HyRef@currentHtag
      \expandafter\@firstoffive#1\@empty\@empty\@empty
      \null
    }%
  \else
    \protect\G@refundefinedtrue
    \nfss@text{\reset@font\bfseries\textcolor{mymissingref}{??}}%
    \@latex@warning{%
      Reference `#2' on page \thepage\space undefined%
    }%
  \fi
}




\renewcommand{\autoref}{\cref}
% \ifEditingMode{
% \hypersetup{
%     colorlinks = true,
%     citecolor=blue
% }
% }\else\hypersetup{
%     colorlinks = true%, citecolor=blue
% }\fi
